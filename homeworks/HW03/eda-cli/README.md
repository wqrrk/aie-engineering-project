# S03 – eda_cli: мини-EDA для CSV

Небольшое CLI-приложение для базового анализа CSV-файлов.
Используется в рамках Семинара 03 курса «Инженерия ИИ».

## Требования

- Python 3.11+
- [uv](https://docs.astral.sh/uv/) установлен в систему

## Инициализация проекта

В корне проекта (S03):

```bash
uv sync
```

Эта команда:

- создаст виртуальное окружение `.venv`;
- установит зависимости из `pyproject.toml`;
- установит сам проект `eda-cli` в окружение.

## Запуск CLI

### Краткий обзор

```bash
uv run eda-cli overview data/example.csv
```

Параметры:

- `--sep` – разделитель (по умолчанию `,`);
- `--encoding` – кодировка (по умолчанию `utf-8`).

### Полный EDA-отчёт

```bash
uv run eda-cli report data/example.csv --out-dir reports
```

В результате в каталоге `reports/` появятся:

- `report.md` – основной отчёт в Markdown;
- `summary.csv` – таблица по колонкам;
- `missing.csv` – пропуски по колонкам;
- `correlation.csv` – корреляционная матрица (если есть числовые признаки);
- `top_categories/*.csv` – top-k категорий по строковым признакам;
- `hist_*.png` – гистограммы числовых колонок;
- `missing_matrix.png` – визуализация пропусков;
- `correlation_heatmap.png` – тепловая карта корреляций.

### Дополнительные опции

##### В рамках домашнего задания были реализованы:

##### 1) Дополнительные эвристики в функции в файле `core.py`: 
- `has_constant_columns` - флаг, содержит ли таблица хотя бы один константный столбец;
- `has_suspicious_id_duplicates` - флаг, содержит ли таблица дубликаты по ID;
- `has_many_zero_values` - флаг, содержит ли колонка более, чем критичное количество нулей. 

##### 2) Включение новых эвристик в логику программы:

- Эти флаги также были включены в рассчет общего "скора" данных; 
- Были прописаны тесты новых эвристик в `test_core.py`;
- Флаги используются в основном отчете `report.md` и в описанном ниже `summary.json`; 
  
##### 3) Изменения в файле `cli.py`:

##### Добавлена новая команда **`head`**, предназначенная для вывода первых строк CSV-файла. Команда служит быстрым аналогом метода `DataFrame.head()` и позволяет просматривать структуру данных напрямую из CLI.

Параметры команды: 
- **`path`** *(обязательный аргумент)* — путь к CSV-файлу;
- **`--sep`** — разделитель столбцов (по умолчанию `","`);
- **`--encoding`** — кодировка файла (по умолчанию `"utf-8"`);
- **`--amount`** — количество строк, которые необходимо вывести (по умолчанию `10`).

*Пример использования*:

```bash
uv run eda-cli head data/my_data.csv --amount 5
```


##### Добавлен флаг `--json-summary`

В команду `report` добавлен новый флаг **`--json-summary`**, который позволяет автоматически создавать файл **`summary.json`** в папке отчёта.  

Этот JSON-файл содержит компактную сводку по датасету, включая:

- общее количество строк (`n_rows`);
- общее количество столбцов (`n_cols`);
- интегральную метрику качества (`quality_score`);
- максимальную долю пропусков среди всех колонок (`max_missing_share`);
- перечень «проблемных» колонок, разделённых по типам:
  - `missing_cols` — колонки с высокой долей пропусков;
  - `constant_cols` — константные колонки (одно уникальное значение);
  - `id_duplicates` — колонки, где обнаружены дубликаты идентификаторов;
  - `many_zeros` — колонки с чрезмерно высокой долей нулевых значений.

*Пример использования*:

```bash
uv run eda-cli report data/my_data.csv --out-dir reports_my_data --json-summary
```

## Тесты

```bash
uv run pytest -q
```
